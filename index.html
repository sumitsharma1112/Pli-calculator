<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PLI Santosh Calculator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
padding:20px;
}

.container{
background:white;
padding:30px;
max-width:600px;
margin:auto;
border-radius:15px;
}

button{
width:100%;
padding:15px;
margin-top:20px;
background:#667eea;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
}

.result{
margin-top:20px;
padding:15px;
background:#eef;
border-radius:8px;
display:none;
}

.highlight{
font-size:22px;
font-weight:bold;
color:#667eea;
}
</style>
</head>

<body>

<div class="container">

<h2>PLI Santosh Calculator</h2>

<label>DOB</label>
<input type="date" id="dob" onchange="updateBasePremium()">

<label>Sum Assured</label>
<input type="number" id="sum" value="500000" min="20000" step="5000" onchange="updateBasePremium()">

<label>Maturity Age</label>
<select id="maturity" onchange="updateBasePremium()">
<option>35</option>
<option>40</option>
<option>45</option>
<option>50</option>
<option>55</option>
<option>58</option>
<option selected>60</option>
</select>

<label>Frequency</label>
<select id="frequency">
<option value="monthly">Monthly</option>
<option value="half">Half-Yearly</option>
<option value="yearly">Yearly</option>
</select>

<label>Base Monthly Premium</label>
<input type="number" id="basePremium" readonly>

<button onclick="calculate()">Calculate</button>

<button onclick="downloadPDF()">Download PDF</button>

<div class="result" id="result"></div>

</div>

<script>

const premiumTable = {
45:{60:29}
};

function calculatePLIAge(dob){
const birth = new Date(dob);
const today = new Date();
let age = today.getFullYear() - birth.getFullYear();
if(today.getMonth() > birth.getMonth() ||
(today.getMonth()==birth.getMonth() && today.getDate()>=birth.getDate())){
age++;
}
return age;
}

function updateBasePremium(){
const dob=document.getElementById("dob").value;
const sum=parseInt(document.getElementById("sum").value);
const maturity=parseInt(document.getElementById("maturity").value);
if(!dob || !sum)return;
const age=calculatePLIAge(dob);
if(!premiumTable[age] || !premiumTable[age][maturity])return;
const premium5000=premiumTable[age][maturity];
const basePremium=premium5000*(sum/5000);
document.getElementById("basePremium").value=basePremium;
}

let calc={};

function calculate(){

const dob=document.getElementById("dob").value;
const sum=parseInt(document.getElementById("sum").value);
const maturity=parseInt(document.getElementById("maturity").value);
const frequency=document.getElementById("frequency").value;
const baseMonthlyPremium=parseInt(document.getElementById("basePremium").value);

const age=calculatePLIAge(dob);
const term=maturity-age;

const saRebateMonthly=Math.floor(sum/20000);

let basePremium, saRebate, freqRebate, finalPremium;

if(frequency=="monthly"){
basePremium=baseMonthlyPremium;
saRebate=saRebateMonthly;
freqRebate=0;
finalPremium=basePremium-saRebate;
}

if(frequency=="half"){
basePremium=baseMonthlyPremium*6;
saRebate=saRebateMonthly*6;
let intermediate=basePremium-saRebate;
freqRebate=Math.floor(intermediate*0.01);
finalPremium=intermediate-freqRebate;
}

if(frequency=="yearly"){
basePremium=baseMonthlyPremium*12;
saRebate=saRebateMonthly*12;
let intermediate=basePremium-saRebate;
freqRebate=Math.floor(intermediate*0.02);
finalPremium=intermediate-freqRebate;
}

const bonusRate=52;
const bonusPerYear=(sum*bonusRate)/1000;
const totalBonus=bonusPerYear*term;
const maturityAmount=sum+totalBonus;

calc={age,term,sum,finalPremium,maturityAmount};

document.getElementById("result").style.display="block";
document.getElementById("result").innerHTML=`
PLI Age: ${age}<br>
Term: ${term}<br>
Premium: ₹${finalPremium}<br>
Maturity: ₹${maturityAmount}
`;
}

function downloadPDF(){
const {jsPDF}=window.jspdf;
const doc=new jsPDF();
doc.text("PLI Santosh Calculation",20,20);
doc.text("Premium: "+calc.finalPremium,20,40);
doc.text("Maturity: "+calc.maturityAmount,20,60);
doc.save("PLI_Santosh_Calculation.pdf");
}

</script>

</body>
</html>
